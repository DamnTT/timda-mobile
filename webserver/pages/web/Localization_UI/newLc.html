<!DOCTYPE html>
<!-- saved from url=(0050)http://blog.themearmada.com/demos/off-canvas-menu/ -->
<html>

<head>
    <title>Timda UI</title>
    <meta charset="UTF-8">
    <!--Font-->
    <link rel="shortcut icon" href="img/icon.png" />
    <link rel="stylesheet" href="font-awesome-4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="jquery-ui-1.11.4/jquery-ui.css">
    <link rel="stylesheet" href="css/Lcworldmap.css">
    <link rel="stylesheet" href="css/font-pacifico.css">
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <!--script src="js/main.js"></script-->
    <script src="jquery-ui-1.11.4/jquery-ui.js"></script>
    <script src="jquery-ui-1.11.4/jquery-ui.min.js"></script>
    <script src="js/eventemitter2.min.js"></script>
    <script src="js/close_right_button.js"></script>
    <script src="js/CloseReverseOut.js"></script>
    <script src="js/roslib.js"></script>
    <script src="js/Lcworldmap.js"></script>
    <!--<script src="js/RobotConnect.js"></script>-->


</head>

<body onload="joystick_main();MonitorSwitch(false)">
    <div class="modal-dialog" id="background" style="width:1500px">
        <div class="modal-content motherground">
            <div class="modal-header title">
                <h4 class="modal-title" id="titleModalLabel">WRS compititon</h4>

                <table id="InterfaceSetting">
                    <tr>
                        <td>
                            <div>
                                <img id="Setting_Wifi" src="img/wifi.png" data-toggle="modal"
                                    data-target="#connect_Robot"></img>
                            </div>
                        </td>
                        <td>
                            <div id="wifilight">
                                <canvas id="Light" width="50" height="50" z-index:="5"></canvas>
                            </div>
                        </td>
                        <td>
                            <div id="setting">
                                <img id="setting_button" src="img/setting.png" data-toggle="modal"
                                    data-target="#setting_Robot">
                            </div>
                        </td>
                    </tr>
                </table>
            </div>

            <div id="LocalizationDiv">
                <table>
                    <tr>
                        <div style="width:180px;">
                            <input id="imuButton" type="button"
                                value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;陀螺儀校正&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"
                                onclick="ImuReset()">
                        </div>
                    </tr>
                    <tr>
                        <div style="width:180px;">
                            <input id="ResetButton" type="button"
                                value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;定位重置&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"
                                onclick="CoordReset()">
                        </div>
                    </tr>
                    <tr>
                        <div style="width:180px;">
                            <input id="ReverseButton" type="button"
                                value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;定位反轉&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"
                                onclick="CoordReverse()">
                        </div>
                    </tr>
                    <tr>
                        <div style="width:180px;">
                            <input id="shutdown" type="button"
                                value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shutdown&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"
                                onclick="shutdown()">
                        </div>
                    </tr>
                </table>

            </div>
            <div id="FunctionButttonDiv">
                <table>
                    <tr>
                        <div style="width:140px;">
                            <input autocomplete="off" id="GroundButton" type="checkbox"
                                onclick="GroundSwitch(this.checked);">
                            <label id="GroundLable" for="GroundButton">Field Rotate</label>
                        </div>
                    </tr>
                    <tr>
                        <div style="width:140px;">
                            <input autocomplete="off" id="LocalizationButton" type="checkbox"
                                onclick="MonitorSwitch(this.checked);">
                            <label id="LocalizationLable" for="LocalizationButton">Localization Map</label>
                        </div>
                    </tr>
                    <tr>
                        <div style="width:140px;">
                            <input autocomplete="off" id="KeyboardControlButton" type="checkbox" name="KeyboardControl"
                                onclick="KeyboardState(this.checked)" />
                            <label id="KeyboardControlLable" for="KeyboardControlButton">Keyboard Control</label>
                        </div>
                    </tr>

                    <tr>
                        <div style="width:140px;">
                            <input id="StandbyButton" type="checkbox" name="RobotRemoteButton"
                                onclick="RemoteSwitch(this.checked);" />
                            <label id="StandbyLable" for="StandbyButton">&nbsp;&nbsp;&nbsp;Stand
                                by&nbsp;&nbsp;&nbsp;</label>
                        </div>
                    </tr>
                </table>
            </div>
            <div id="MCLInformation">
                <label>Connect to rosbridge:&nbsp; </label>
                <label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
                <span id="host-info"></span>
                <span id="ros-status"></span>
                <br>
                <label>Socket IO status:&nbsp;</label>
                <label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
                <span id="io-status"></span>
            </div>
            <div id="MapArea">
                <img id="canvasMap"></img>
            </div>

            <div id="canvasMap">
                <canvas id="path_map" class="DrawRect" width="1000" height="723"></canvas>
            </div>
            <div class="form-group" id="RobotModule">
                <table>
                    <div id="information" style="border: 2px rgb(3, 167, 158) dashed">
                        <div style="left:750px;">
                            <!-- Publish X:<input id="publish_x" type="text" /><br />
                            Publish Y:<input id="publish_y" type="text" /><br /> -->
                            robot_X :<input id="position_x" type="text" /></br>
                            robot_Y :<input id="position_y" type="text" />
                        </div>
                    </div>
                </table>
            </div>
            <div id="SpeedDiv">
                <table>
                    <tr>
                        <td colspan="2">
                            <label id="SpeedLabel">Speed&nbsp;<i class="fa fa-bolt "></i></label>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input id="SpeedSlider" name="SpeedElement" type="range" min="0" max="100" value="0"
                                oninput="ToInputValue(this.value,this.name,1);">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input id="SpeedInput" name="SpeedElement" placeholder="Speed" value="0" type="number"
                                min="0" max="100" oninput="ToSliderValue(this.value,this.name,0);" />
                        </td>
                    </tr>
                </table>
            </div>
            <div id="Joystick">
                <canvas id="Joystick_Canvas">
                    Your browser does not support the HTML5 canvas tag.
                </canvas>
            </div>
            <div id="HoldBallDiv1" vlaue="0">
                <i id="HoldBallButton1" class="fa fa-futbol-o fa-2x" aria-hidden="true"></i>
            </div>
            <div class="modal fade" id="connect_Robot" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-sm">
                    <div class="Wifimodal_content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="innerModalLabel">Connect To Robot</h4>
                        </div>
                        <div class="modal-body">
                            <form>
                                <div class="form-group">
                                    <label for="RobotIPDATA" class="control-label">Robot_IP:</label>
                                    <input name="RobotIPDATA" type="text" class="form-control" id="RobotIP"
                                        value=IP.textContent>
                                </div>
                                <div class="form-group">
                                    <label for="RobotHostDATA" class="control-label">Robot_Host:</label>
                                    <input name="RobotHostDATA" type="text" class="form-control" id="RobotHost"
                                        value=Host.textContent>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal"
                                onclick="ros.close();">Close</button>
                            <button type="button" class="btn btn-primary" id="send-message"
                                onclick="RobotConnect();history.go(0);">Connect</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="setting_Robot" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-sm">
                    <div class="settingmodal_content" id="setting_block">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="settingLabel">Robot Setting</h4>
                        </div>
                        <div class="modal-body">
                            <div class="modal-body" id="GeneralDisplay">
                                <div id="RobotStateDiv">
                                    <table>
                                        <tr>
                                            <td>
                                                <!-- General_Button -->
                                                <div style="width:130px;">
                                                    <input id="SPlanningVelocityLabel" type="radio" name="SwitchButton"
                                                        checked="checked" />
                                                    <label id="SPlanningVelocityLabel"
                                                        for="SPlanningVelocityLabel">S-Planning Velocity</label>
                                                </div>
                                            </td>
                                            <td>
                                                <div style="width:130px;">
                                                    <input id="BallElementLabel" type="radio" name="SwitchButton" />
                                                    <label id="BallElementLabel" for="BallElementLabel">Hold
                                                        Condition</label>
                                                </div>
                                            </td>
                                            <td>
                                                <div style="width:130px;">
                                                    <input id="MCLElementLabel" type="radio" name="SwitchButton" />
                                                    <label id="MCLElementLabel" for="MCLElementLabel">MCL
                                                        Parameter</label>
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                <div class="form-group" id="SPlanningVelocityModule">
                                    <table style="width:100%;">
                                        <tr>
                                            <th style="font-weight:bold;">ConfigName</th>
                                            <th style="font-weight:bold;">Value</th>
                                        </tr>
                                        <tr>
                                            <td>(double)Vdis_max</td>
                                            <td>
                                                <input type="text" name="SPlanningVelocityElement" value="2.2" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>(double)Vdis_min</td>
                                            <td>
                                                <input type="text" name="SPlanningVelocityElement" value="0.3" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>(double)VTdis_max</td>
                                            <td>
                                                <input type="text" name="SPlanningVelocityElement" value="80.0" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>(double)VTdis_min</td>
                                            <td>
                                                <input type="text" name="SPlanningVelocityElement" value="50.0" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>(double)Tangle_max</td>
                                            <td>
                                                <input type="text" name="SPlanningVelocityElement" value="20.0" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>(double)Tangle_min</td>
                                            <td>
                                                <input type="text" name="SPlanningVelocityElement" value="3.0" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>(double)Angle_max</td>
                                            <td>
                                                <input type="text" name="SPlanningVelocityElement" value="144.0" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>(double)Angle_min</td>
                                            <td>
                                                <input type="text" name="SPlanningVelocityElement" value="5.0" />
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                <div class="form-group" id="BallElementModule">
                                    <table style="width:100%">
                                        <tr>
                                            <th>ConfigName</th>
                                            <th>Value</th>
                                        </tr>
                                        <tr>
                                            <td>(double)HoldBall_angle</td>
                                            <td>
                                                <input type="text" name="BallElement" value="3.0" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>(double)HoldBall_distance</td>
                                            <td>
                                                <input type="text" name="BallElement" value="0.33" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>(double)LostBall_angle</td>
                                            <td>
                                                <input type="text" name="BallElement" value="9.0" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>(double)LostBall_distance</td>
                                            <td>
                                                <input type="text" name="BallElement" value="0.4" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>(bool)Chase_Enable</td>
                                            <td>
                                                <input type="text" name="BallElement" value="1" />
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="form-group" id="MCLElementModule">
                                <table style="width:100%">
                                    <tr>
                                        <th>ConfigName</th>
                                        <th>Value</th>
                                    </tr>
                                    <tr>
                                        <td>(double)a_fast</td>
                                        <td>
                                            <input type="text" name="MCLElement" value="1.0" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>(double)a_slow</td>
                                        <td>
                                            <input type="text" name="MCLElement" value="0.0005" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>(double)wcmps</td>
                                        <td>
                                            <input type="text" name="MCLElement" value="0.1" />
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div class="modal-footer" id="SetGeneralExecute">
                            <!-- <input id="next" type="button" value="NEXT"/> -->
                            <!-- &emsp;&emsp;&emsp;&emsp;&emsp; -->
                            <input class="button" id="GeneralSave" type="button" value="SAVE"
                                onclick="setTimeout(GeneralTransfer(),1000);setTimeout(topicSaveParam(1),1000);setTimeout(saveyamel(),1000)" />
                            <input class="button" id="GeneralReset" type="button" value="RESET"
                                onclick="GeneralReset();setTimeout(GeneralTransfer(),1000);setTimeout(topicSaveParam(1),1000);" />
                            <!-- <input id="close" type="button" value="CLOSE"/> -->
                        </div>
                    </div>
                </div>
                </form>
            </div>
        </div>
    </div>
    </div>
    <script>
         // Connecting to ROS
        // -----------------
        if (location.hostname=="") {
            location.hostname = "localhost";
        }

        var ros = new ROSLIB.Ros({
            url : 'ws://'+location.hostname+':9090'
        });

        ros.on('connection', function() {
            console.log('Connected to websocket server.');
            $('#ros-status').text('\tOK');
        });

        ros.on('error', function(error) {
            console.log('Error connecting to websocket server: ', error);
            $('#ros-status').text('\tERROR');
        });

        ros.on('close', function() {
            console.log('Connection to websocket server closed.');
            $('#ros-status').text('\tCLOSE');
        });

        // Connecting to SocketIO
        // -----------------
        $(function () {
            var socket = io();
            socket.on('connect', function () {
                console.log('IO STATUS: ', socket.connected);
                $('#io-status').text(socket.connected);
            });
            socket.on('disconnect', function () {
                console.log('IO STATUS: ', socket.connected);
                $('#io-status').text(socket.connected);
            });
            $('#shutdown').click(function () {
                var c = confirm("Are you sure you want to shut down?");
                if (c) {
                    socket.emit('shutdown', '');
                }
            });
        });
        // Show rosbridge connection info
        // -----------------
        $(function () {
            $('#host-info').text(location.hostname + ':9090');
        });
        $(document).ready(function () {//单选  
            $('#LocalizationButton,#WhitelineButton').change(function () {
                //console.log($(this).prop('checked'))
                if (!$(this).prop('checked')) {
                    return false;
                }
                switch ($(this).attr('id')) {
                    case "LocalizationButton":
                        $('#WhitelineButton').prop('checked', false);
                        $('#WhitelineButton').change();
                        break;
                    case "WhitelineButton":
                        $('#LocalizationButton').prop('checked', false);
                        $('#LocalizationButton').change();
                        break;
                }
            });
        });
    </script>
    <script src="js/RobotConnect.js"></script>
    <script src="js/variable.js"></script>
    <script src="js/LcROS.js"></script>
    <script src="js/Joystick.js"></script>
    <!-- <script>
        document.oncontextmenu = function () { return false; } // 防右鍵選單
        var joy3Param = { "title": "joystick3" };
        var Joy3 = new Joystick_info('joy3Div', joy3Param);

        // var joy3IinputPosX = document.getElementById("information");
        // var joy3InputPosY = document.getElementById("joy3PosizioneY");
        // var joy3Direzione = document.getElementById("joy3Direzione");
        var publish_x = document.getElementById("publish_x");
        var publish_y = document.getElementById("publish_y");

        // setInterval(function(){ joy3IinputPosX.value=Joy3.GetPosX(); }, 50);
        // setInterval(function(){ joy3InputPosY.value=Joy3.GetPosY(); }, 50);
        // setInterval(function(){ joy3Direzione.value=Joy3.GetDir(); }, 50);
        setInterval(function () { publish_x.value = Joy3.GetX(); }, 50);
        setInterval(function () { publish_y.value = Joy3.GetY(); }, 50);
        console(publish_x);

        $('#powerRange').on("input change", function () {
            $('#powerShow').val($('#powerRange').val());
        });
    </script> -->
    <script src="js/RosTopic.js"></script>
    <script src="js/RosParam.js"></script>
    <script src="js/KeyboardControl.js"></script>
    <script src="js/video.js"></script>
    <script src="js/HoldBall.js"></script>
    <script src="js/SliderControl.js"></script>
    <script type="text/javascript">
        $("#LocalizationDiv").buttonset();
        $("#FunctionButttonDiv").buttonset();
        $("#RobotStateDiv").buttonset();

        $("#SPlanningVelocityModule").show();
        $("#BallElementModule").hide();
        $("#MCLElementModule").hide();

        $("#SPlanningVelocityLabel").click(function () {
            $("#SPlanningVelocityModule").show();
            $("#BallElementModule").hide();
            $("#MCLElementModule").hide();
        });
        $("#BallElementLabel").click(function () {
            $("#SPlanningVelocityModule").hide();
            $("#BallElementModule").show();
            $("#MCLElementModule").hide();
        });
        $("#MCLElementLabel").click(function () {
            $("#BallElementModule").hide();
            $("#SPlanningVelocityModule").hide();
            $("#MCLElementModule").show();
        });
    </script>
</body>

</html>